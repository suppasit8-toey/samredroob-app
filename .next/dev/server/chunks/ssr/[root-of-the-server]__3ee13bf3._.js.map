{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Suppa/OneDrive/SAMREDROOB_APP/src/lib/supabase.ts"],"sourcesContent":["\r\nimport { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\n// Only create the client if the environment variables are available to avoid build errors during setup\r\nexport const supabase = (supabaseUrl && supabaseKey)\r\n    ? createClient(supabaseUrl, supabaseKey)\r\n    : null;\r\n"],"names":[],"mappings":";;;;AACA;;AAEA,MAAM;AACN,MAAM;AAGC,MAAM,WAAW,uCAClB,IAAA,8LAAY,EAAC,aAAa,eAC1B"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Suppa/OneDrive/SAMREDROOB_APP/src/app/admin/layout.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { useRouter, usePathname } from \"next/navigation\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Link from 'next/link';\r\nimport {\r\n    LayoutDashboard,\r\n    Package,\r\n    Calculator,\r\n    LogOut,\r\n    Home,\r\n    Menu,\r\n    X,\r\n    ChevronRight,\r\n    List,\r\n    FolderOpen\r\n} from 'lucide-react';\r\n\r\nexport default function AdminLayout({\r\n    children,\r\n}: {\r\n    children: React.ReactNode;\r\n}) {\r\n    const router = useRouter();\r\n    const pathname = usePathname();\r\n    const [loading, setLoading] = useState(true);\r\n    const [isSidebarOpen, setIsSidebarOpen] = useState(false); // Default to FALSE on mobile to prevent overlap\r\n\r\n    // Allow access to login page without auth\r\n    if (pathname === \"/admin/login\") {\r\n        return <>{children}</>;\r\n    }\r\n\r\n    useEffect(() => {\r\n        const checkUser = async () => {\r\n            // ... Authentication check logic remains same ...\r\n            if (!supabase) {\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            const { data: { session } } = await supabase.auth.getSession();\r\n\r\n            if (!session) {\r\n                router.push(\"/admin/login\");\r\n                return;\r\n            }\r\n            setLoading(false);\r\n        };\r\n\r\n        checkUser();\r\n\r\n        // Auto-open sidebar on larger screens\r\n        const handleResize = () => {\r\n            if (window.innerWidth >= 768) { // md breakpoint\r\n                setIsSidebarOpen(true);\r\n            } else {\r\n                setIsSidebarOpen(false);\r\n            }\r\n        };\r\n\r\n        // Initial check\r\n        handleResize();\r\n\r\n        window.addEventListener('resize', handleResize);\r\n        return () => window.removeEventListener('resize', handleResize);\r\n\r\n    }, [router, pathname]);\r\n\r\n    const handleSignOut = async () => {\r\n        if (supabase) {\r\n            await supabase.auth.signOut();\r\n        }\r\n        router.push(\"/admin/login\");\r\n    };\r\n\r\n    const navItems = [\r\n        { name: 'ภาพรวม', href: '/admin', icon: <LayoutDashboard size={20} /> },\r\n        { name: 'หมวดหมู่สินค้า', href: '/admin/categories', icon: <List size={20} /> },\r\n        { name: 'คอลเลกชัน', href: '/admin/collections', icon: <FolderOpen size={20} /> },\r\n        { name: 'ตั้งค่าราคา', href: '/admin/pricing', icon: <Calculator size={20} /> },\r\n    ];\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex h-screen items-center justify-center bg-gray-50\">\r\n                <div className=\"flex flex-col items-center\">\r\n                    <div className=\"w-10 h-10 border-4 border-black border-t-transparent rounded-full animate-spin mb-4\"></div>\r\n                    <p className=\"text-gray-500 font-medium\">Loading...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex h-screen bg-[#f8f9fa] overflow-hidden font-sans\">\r\n\r\n            {/* Mobile Sidebar Overlay (Backdrop) */}\r\n            {isSidebarOpen && (\r\n                <div\r\n                    className=\"fixed inset-0 bg-black/30 z-40 md:hidden backdrop-blur-sm transition-opacity\"\r\n                    onClick={() => setIsSidebarOpen(false)}\r\n                />\r\n            )}\r\n\r\n            {/* Sidebar */}\r\n            <aside\r\n                className={`\r\n                    fixed md:static inset-y-0 left-0 z-50 \r\n                    w-[260px] bg-white border-r border-gray-100 shadow-xl md:shadow-none\r\n                    transition-transform duration-300 ease-in-out\r\n                    flex flex-col\r\n                    ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full md:translate-x-0'}\r\n                `}\r\n            >\r\n                <div className=\"h-16 flex items-center px-6 border-b border-gray-50 shrink-0\">\r\n                    <div className=\"w-8 h-8 bg-black rounded-lg flex items-center justify-center text-white font-bold text-lg shadow-md mr-3 shrink-0\">\r\n                        A\r\n                    </div>\r\n                    <div className=\"truncate\">\r\n                        <h1 className=\"font-bold text-base text-gray-900 leading-tight\">Admin</h1>\r\n                        <p className=\"text-[10px] text-gray-400 font-medium tracking-wider uppercase\">Control Panel</p>\r\n                    </div>\r\n                    {/* Close button for mobile */}\r\n                    <button\r\n                        className=\"ml-auto md:hidden p-1 text-gray-400 hover:text-black\"\r\n                        onClick={() => setIsSidebarOpen(false)}\r\n                    >\r\n                        <X size={20} />\r\n                    </button>\r\n                </div>\r\n\r\n                <nav className=\"flex-1 p-4 space-y-1 overflow-y-auto\">\r\n                    {navItems.map((item) => {\r\n                        const isActive = pathname === item.href;\r\n                        return (\r\n                            <Link\r\n                                key={item.href}\r\n                                href={item.href}\r\n                                onClick={() => {\r\n                                    if (window.innerWidth < 768) setIsSidebarOpen(false);\r\n                                }}\r\n                                className={`group flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200 ${isActive\r\n                                        ? \"bg-black text-white shadow-md shadow-black/10\"\r\n                                        : \"text-gray-600 hover:bg-gray-50 hover:text-black\"\r\n                                    }`}\r\n                            >\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    {item.icon}\r\n                                    <span className=\"font-medium text-[14px]\">{item.name}</span>\r\n                                </div>\r\n                                {isActive && <ChevronRight size={16} className=\"opacity-50\" />}\r\n                            </Link>\r\n                        );\r\n                    })}\r\n\r\n                    <div className=\"mt-6 pt-6 border-t border-gray-100\">\r\n                        <Link\r\n                            href=\"/\"\r\n                            className=\"flex items-center gap-3 px-4 py-3 rounded-xl text-gray-500 hover:bg-gray-50 hover:text-black transition-all duration-200\"\r\n                            target=\"_blank\"\r\n                        >\r\n                            <Home size={20} />\r\n                            <span className=\"font-medium text-[14px]\">ไปที่หน้าเว็บไซต์</span>\r\n                        </Link>\r\n                    </div>\r\n                </nav>\r\n\r\n                <div className=\"p-4 border-t border-gray-50 shrink-0\">\r\n                    <button\r\n                        onClick={handleSignOut}\r\n                        className=\"flex items-center gap-3 px-4 py-3 w-full rounded-xl text-red-500 hover:bg-red-50 hover:text-red-600 transition-all duration-200 group\"\r\n                    >\r\n                        <LogOut size={20} className=\"group-hover:-translate-x-1 transition-transform\" />\r\n                        <span className=\"font-medium text-[14px]\">ออกจากระบบ</span>\r\n                    </button>\r\n                </div>\r\n            </aside>\r\n\r\n            {/* Main Content */}\r\n            <main className=\"flex-1 flex flex-col h-screen overflow-hidden relative w-full\">\r\n                {/* Top Header */}\r\n                <header className=\"h-16 bg-white/90 backdrop-blur-md border-b border-gray-100 px-4 md:px-8 flex justify-between items-center sticky top-0 z-30 w-full shadow-sm\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        {/* Mobile Menu Button */}\r\n                        <button\r\n                            className=\"md:hidden p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-lg hover:text-black transition\"\r\n                            onClick={() => setIsSidebarOpen(true)}\r\n                        >\r\n                            <Menu size={24} />\r\n                        </button>\r\n\r\n                        <div>\r\n                            <h2 className=\"text-lg font-bold text-gray-900 leading-tight\">\r\n                                {navItems.find(i => i.href === pathname)?.name || 'Dashboard'}\r\n                            </h2>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"hidden sm:flex items-center gap-2 px-2.5 py-1 bg-green-50 text-green-700 rounded-full border border-green-100\">\r\n                            <span className=\"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse\"></span>\r\n                            <span className=\"text-[10px] font-bold uppercase tracking-wide\">Online</span>\r\n                        </div>\r\n                        <div className=\"h-8 w-8 rounded-full bg-gray-100 flex items-center justify-center border border-gray-200 text-xs font-bold text-gray-600\">\r\n                            A\r\n                        </div>\r\n                    </div>\r\n                </header>\r\n\r\n                {/* Scrollable Content Area */}\r\n                <div className=\"flex-1 overflow-y-auto bg-[#f8f9fa] p-4 md:p-6 pb-20\">\r\n                    <div className=\"max-w-6xl mx-auto w-full\">\r\n                        {children}\r\n                    </div>\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}